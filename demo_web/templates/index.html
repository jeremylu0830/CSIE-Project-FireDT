<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Freelancer - Start Bootstrap Theme</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link
            href="{{ url_for('static', filename='css/styles.css') }}"
            rel="stylesheet"
        />

    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="#page-top">Fire-Dt</a>
    <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" 
            type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" 
            aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item mx-0 mx-lg-1">
          <a class="nav-link py-3 px-0 px-lg-3 rounded" href="#portfolio">檔案上傳</a>
        </li>
        <li class="nav-item mx-0 mx-lg-1">
          <a class="nav-link py-3 px-0 px-lg-3 rounded" href="#about">回傳成果
          </a>
        </li>
        <li class="nav-item mx-0 mx-lg-1">
          <a class="nav-link py-3 px-0 px-lg-3 rounded" href="#contact">聯絡我們</a>
        </li>

        <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded" href="login">登入</a>
        </li>

    </div>
  </div>
</nav>
<!-- Masthead-->
<header class="masthead bg-primary text-white text-center">
    <div class="container d-flex align-items-center flex-column">
        <!-- Masthead Avatar Image-->
        <div class="masthead-avatar mb-5">
            <i class="fas fa-fire fa-8x mb-5 animated-fire"></i>
        </div>

        <!-- Masthead Heading-->
        <h1 class="masthead-heading text-uppercase mb-3">Fire-Dt</h1>

        <!-- Icon Divider-->
        <div class="divider-custom divider-light mb-4">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
            <div class="divider-custom-line"></div>
        </div>

        <!-- Research Description -->
        <p class="text-center text-light mt-4 mb-4" style="font-size: 1.4rem; line-height: 1.6;">
          我們是來自國立成功大學資訊工程學系的團隊，隊名是「No Cap」，團隊成員分別是魯倫愷、林本然、蔡侑傑。我們提出的作品「智慧火災逃生：數位孿生火災模擬」，這同時也是我們大學部的畢業專題，我悶希望建立一套系統，讓使用者只要上傳室內空間的 RGB-D 的影像或影片，就能透過我們的系統能夠讓使用者了解其室內空間發生火災時，整體環境會怎麼樣的變化，包括火勢的走向、煙霧分布的情況、室內溫度變化等。
          </p>

        <!-- Masthead Subheading-->
    </div>
</header>

        
        <!-- Portfolio Section-->
        <!-- 把這一段替換原來的 Portfolio -->
<section class="page-section portfolio" id="portfolio">
  <div class="container">
    <!-- 區塊標題 -->
    <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">
      上傳檔案
    </h2>
    <!-- 分隔線 -->
    <div class="divider-custom mb-5">
      <div class="divider-custom-line"></div>
      <div class="divider-custom-icon"><i class="fas fa-upload"></i></div>
      <div class="divider-custom-line"></div>
    </div>

    <!-- 上傳表單（Bootstrap 5 版本） -->
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <form
          action="{{ url_for('upload_files') }}"
          method="post"
          enctype="multipart/form-data"
          class="text-center"
        >
          <!-- ❶ 檔案輸入框：加上 form-control 使其套用 Bootstrap 樣式 -->
          <div class="mb-3">
            <label for="fileInput" class="form-label">選擇檔案</label>
            <input
              class="form-control"
              type="file"
              id="fileInput"
              name="files"
              multiple
            />
            <div class="form-text">可同時選擇多個檔案上傳</div>
          </div>

          <!-- ❷ 上傳按鈕：加上 btn btn-primary btn-lg，使按鈕符合主題 -->
          <button
            type="submit"
            class="btn btn-primary btn-lg"
          >
            <i class="fas fa-cloud-upload-alt me-2"></i>開始上傳
          </button>
        </form>

        <!-- 檔案預覽列表（可留著，如果要動態顯示檔案清單） -->
        <ul id="fileList" class="list-group mt-4"></ul>
      </div>
    </div>
  </div>
</section>


 <!-- About Section (回傳成果區) -->

    <section class="page-section bg-primary text-white mb-0" id="about">
      <div class="container">
        <!-- 區塊標題 -->
        <h2 class="page-section-heading text-center text-uppercase text-white">
          回傳成果
        </h2>
        <!-- 分隔線 -->
        <div class="divider-custom divider-light mb-4">
          <div class="divider-custom-line"></div>
          <div class="divider-custom-icon"><i class="fas fa-exchange-alt"></i></div>
          <div class="divider-custom-line"></div>
        </div>

        <!-- 只有在後端有 video_url 時，才顯示 <video> 播放器 -->
<!-- 在模板中顯示兩個影片 -->
{% if video_urls %}
<!-- 顯示兩個影片並排 -->
<div class="video-container">
    <div class="video-item">
        <h2>影片 1</h2>
        <video controls>
            <source src="{{ video_urls['video1'] }}" type="video/mp4">
            您的瀏覽器不支援 HTML5 影片。
        </video>
    </div>

    <div class="video-item">
        <h2>影片 2</h2>
        <video controls>
            <source src="{{ video_urls['video2'] }}" type="video/mp4">
            您的瀏覽器不支援 HTML5 影片。
        </video>
    </div>
</div>

{% endif %}


      </div>
    </section>

        <!-- Contact Section-->
        <section class="page-section" id="contact">
            <div class="container">
                <!-- Contact Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">聯絡我們</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Contact Section Form-->
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-xl-7">
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- * * SB Forms Contact Form * *-->
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- This form is pre-integrated with SB Forms.-->
                        <!-- To make this form functional, sign up at-->
                        <!-- https://startbootstrap.com/solution/contact-forms-->
                        <!-- to get an API token!-->
                        <form id="contactForm" data-sb-form-api-token="API_TOKEN">
                            <!-- Name input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="name" type="text" placeholder="Enter your name..." data-sb-validations="required" />
                                <label for="name">Full name</label>
                                <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                            </div>
                            <!-- Email address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="email" type="email" placeholder="name@example.com" data-sb-validations="required,email" />
                                <label for="email">Email address</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                            </div>
                            <!-- Phone number input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="phone" type="tel" placeholder="(123) 456-7890" data-sb-validations="required" />
                                <label for="phone">Phone number</label>
                                <div class="invalid-feedback" data-sb-feedback="phone:required">A phone number is required.</div>
                            </div>
                            <!-- Message input-->
                            <div class="form-floating mb-3">
                                <textarea class="form-control" id="message" type="text" placeholder="Enter your message here..." style="height: 10rem" data-sb-validations="required"></textarea>
                                <label for="message">Message</label>
                                <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.</div>
                            </div>
                            <!-- Submit success message-->
                            <!---->
                            <!-- This is what your users will see when the form-->
                            <!-- has successfully submitted-->
                            <div class="d-none" id="submitSuccessMessage">
                                <div class="text-center mb-3">
                                    <div class="fw-bolder">Form submission successful!</div>
                                    To activate this form, sign up at
                                    <br />
                                    <a href="https://startbootstrap.com/solution/contact-forms">https://startbootstrap.com/solution/contact-forms</a>
                                </div>
                            </div>
                            <!-- Submit error message-->
                            <!---->
                            <!-- This is what your users will see when there is-->
                            <!-- an error submitting the form-->
                            <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3">Error sending message!</div></div>
                            <!-- Submit Button-->
                            <button class="btn btn-primary btn-xl disabled" id="submitButton" type="submit">Send</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer text-center">
            <div class="container">
                <div class="row">
                    <!-- Footer Location-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Location</h4>
                        <p class="lead mb-0">
                            NCKU CSIE CPS LAB
                            <br />
                            
                        </p>
                    </div>
                    <!-- Footer Social Icons-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Around the Web</h4>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-linkedin-in"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-dribbble"></i></a>
                    </div>
                    <!-- Footer About Text-->
                    <div class="col-lg-4">
                        <h4 class="text-uppercase mb-4">About Fire-Dt</h4>
                        <p class="lead mb-0">
                            This website is free to use, any usage should cite us @Fire-Dt</a>
                            .
                        </p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Copyright Section-->
        <div class="copyright py-4 text-center text-white">
            <div class="container"><small>Copyright &copy; Fire-Dt 2025</small></div>
        </div>

        
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script
            src="{{ url_for('static', filename='js/index.js') }}"
        ></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
        <script>
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');
            const uploadBtn = document.getElementById('uploadBtn');


<<<<<<< HEAD
            const serverAddress = "https://electric-quietly-antelope.ngrok-free.app ";
=======
            const serverAddress = "https://electric-quietly-antelope.ngrok-free.app";
>>>>>>> master

            // 監聽檔案選擇，渲染清單
            fileInput.addEventListener('change', () => {
                fileList.innerHTML = '';
                Array.from(fileInput.files).forEach(file => {
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center';
                li.innerHTML = `
                    <div>
                        <i class="fas fa-file me-2"></i>${file.name}
                    </div>
                    <span class="badge bg-secondary rounded-pill">${(file.size/1024).toFixed(1)} KB</span>
                `;

                fileList.appendChild(li);
                });
            });

            // 處理上傳
            uploadBtn.addEventListener('click', async () => {
                if (!fileInput.files.length) {
                alert('請先選擇至少一個檔案！');
                return;
                }
                const formData = new FormData();
                Array.from(fileInput.files).forEach(f => formData.append('files', f));

                try {
                const resp = await fetch(`${serverAddress}/api/upload`, { method: 'POST', body: formData });
                if (!resp.ok) throw new Error(resp.statusText);
                const result = await resp.json();
                alert('上傳成功：' + JSON.stringify(result));
                fileInput.value = '';
                fileList.innerHTML = '';
                } catch (err) {
                console.error(err);
                alert('上傳失敗：' + err.message);
                }
            });
            </script>
    </body>
</html>